<% layout("layouts/boilerplate") %>

<div class="report-page">
  <div class="report-container">

    <h1>Report Details</h1>

    <div class="report-grid">

      <!-- LEFT: REPORT INFO -->
      <div class="report-info">
        <h2>Patient Summary</h2>

        <p><strong>Date:</strong> <%= report.createdAt.toDateString() %></p>
        <p><strong>Age:</strong> <%= report.age %></p>
        <p><strong>Sex:</strong> <%= report.sex %></p>
        <p><strong>BMI:</strong> <%= report.BMI %></p>

        <p><strong>Diabetic Retinopathy Stage:</strong>
          <%= report.diabeticRetinopathyLevel %>
        </p>

        <p><strong>Hypertension Risk:</strong>
          <%= report.hypertensionRisk %>%
        </p>

        <p><strong>HbA1c Level:</strong>
          <%= report.hba1cLevel %>
        </p>

        <p><strong>Atherosclerosis Risk:</strong>
          <%= report.atherosclerosisRisk %>%
        </p>
      </div>

      <!-- RIGHT: FUNDUS IMAGE -->
      <div class="report-image">
        <img
          src="<%= report.imageUrl %>"
          alt="Retinal Fundus Scan"
        />
      </div>

    </div>

    <a href="/reports" class="report-back">← Back to Reports</a>

    <form 
  action="/reports/<%= report._id %>?_method=DELETE" 
  method="POST" 
  onsubmit="return confirmDelete();"
  style="margin-top: 20px;"
>
  <button class="btn-delete">
    Delete Report
  </button>
</form>


  </div>
</div>

<script>
  function confirmDelete() {
    return confirm(
      "⚠️ Are you sure you want to delete this report?\n\n" +
      "This action is permanent and cannot be undone."
    );
  }
</script>

