<% layout("layouts/boilerplate") %>

<h2 class="text-center mt-4">Submit New Report</h2>

<form action="/reports" method="POST" enctype="multipart/form-data" class="user-form needs-validation col-md-6 offset-md-3 mt-3" novalidate>
  <div class="mb-3">
    <label for="age" class="form-label">Age</label>
    <input type="number" name="report[age]" id="age" class="form-control" required>
  </div>

  <div class="mb-3">
    <label for="sex" class="form-label">Sex</label>
    <select name="report[sex]" id="sex" class="form-select" required>
      <option value="">Select</option>
      <option value="Male">Male</option>
      <option value="Female">Female</option>
    </select>
  </div>

  <div class="mb-3">
    <label for="bmi" class="form-label">BMI</label>
    <input type="number" step="0.1" name="report[BMI]" id="bmi" class="form-control" required>

  </div>
  <div class="mb-3">
  <label for="smokingStatus" class="form-label">Smoking History</label>
    <select name="report[smokingStatus]" id="smokingStatus" class="form-select" required>
      <option value="">Select</option>
      <option value="Yes">Yes</option>
      <option value="No">No</option>
      <option value="Unknown">Unknown</option>
    </select>
  </div>
  <div class="mb-3">
    <label for="image" class="form-label">Upload FUNDUS Image</label>
    <input type="file" name="image" id="image" class="form-control" accept="image/*" required>
  </div>

  <button type="submit" class="btn btn-primary w-100">Submit</button>
</form>

<script>
  (() => {
    'use strict';
    const forms = document.querySelectorAll('.needs-validation');
    Array.from(forms).forEach(form => {
      form.addEventListener('submit', event => {
        if (!form.checkValidity()) {
          event.preventDefault();
          event.stopPropagation();
        }
        form.classList.add('was-validated');
      }, false);
    });
  })();
</script>
